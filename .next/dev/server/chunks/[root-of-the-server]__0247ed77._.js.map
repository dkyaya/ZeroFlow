{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/joachimjohnson/Documents/comp-sci/ZeroFlow/lib/prisma.js"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nlet prisma;\n\n// Prevent multiple Prisma instances in dev (Next.js hot reload)\nif (process.env.NODE_ENV === \"production\") {\n  prisma = new PrismaClient();\n} else {\n  if (!global.prisma) {\n    global.prisma = new PrismaClient();\n  }\n  prisma = global.prisma;\n}\n\nexport { prisma };\n"],"names":[],"mappings":";;;;AAAA;;AAEA,IAAI;AAEJ,gEAAgE;AAChE;;KAEO;IACL,IAAI,CAAC,yDAAO,MAAM,EAAE;QAClB,yDAAO,MAAM,GAAG,IAAI,6IAAY;IAClC;IACA,SAAS,yDAAO,MAAM;AACxB"}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///Users/joachimjohnson/Documents/comp-sci/ZeroFlow/app/api/summary/route.js"],"sourcesContent":["// app/api/summary/route.js\n// Provides the daily nutrition summary for the dashboard.\n// FPV uses a placeholder userId (1) because authentication is not implemented yet.\n\nimport { NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/prisma\";\n\n// Helper: returns today's time window (00:00 â†’ 23:59)\nfunction getTodayRange() {\n  const start = new Date();\n  start.setHours(0, 0, 0, 0);\n\n  const end = new Date();\n  end.setHours(23, 59, 59, 999);\n\n  return { start, end };\n}\n\nexport async function GET() {\n  try {\n    // FPV placeholder user\n    const USER_ID = 1;\n\n    const { start, end } = getTodayRange();\n\n    // Fetch the user info (placeholder userId = 1 for FPV)\n    const user = await prisma.user.findUnique({\n      where: { id: USER_ID },\n      select: {\n        firstName: true,\n        preferredName: true,\n      },\n    });\n\n    // Fetch all food logs from today\n    const logs = await prisma.foodLog.findMany({\n      where: {\n        userId: USER_ID,\n        createdAt: {\n          gte: start,\n          lte: end,\n        },\n      },\n    });\n\n    // Sum calories for today's intake\n    const caloriesConsumed = logs.reduce(\n      (sum, item) => sum + item.calories,\n      0\n    );\n\n    // FPV static calorie target\n    const caloriesTarget = 2200;\n\n    return NextResponse.json(\n      {\n        user,\n        caloriesTarget,\n        caloriesConsumed,\n        foods: logs.map((item) => ({\n          name: item.name,\n          calories: item.calories,\n        })),\n      },\n      { status: 200 }\n    );\n\n  } catch (err) {\n    console.error(\"Summary API error:\", err);\n    return NextResponse.json(\n      { error: \"Failed to load summary\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;AAC3B,0DAA0D;AAC1D,mFAAmF;;;;;AAEnF;AACA;;;AAEA,sDAAsD;AACtD,SAAS;IACP,MAAM,QAAQ,IAAI;IAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;IAExB,MAAM,MAAM,IAAI;IAChB,IAAI,QAAQ,CAAC,IAAI,IAAI,IAAI;IAEzB,OAAO;QAAE;QAAO;IAAI;AACtB;AAEO,eAAe;IACpB,IAAI;QACF,uBAAuB;QACvB,MAAM,UAAU;QAEhB,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG;QAEvB,uDAAuD;QACvD,MAAM,OAAO,MAAM,yHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YACxC,OAAO;gBAAE,IAAI;YAAQ;YACrB,QAAQ;gBACN,WAAW;gBACX,eAAe;YACjB;QACF;QAEA,iCAAiC;QACjC,MAAM,OAAO,MAAM,yHAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;YACzC,OAAO;gBACL,QAAQ;gBACR,WAAW;oBACT,KAAK;oBACL,KAAK;gBACP;YACF;QACF;QAEA,kCAAkC;QAClC,MAAM,mBAAmB,KAAK,MAAM,CAClC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAClC;QAGF,4BAA4B;QAC5B,MAAM,iBAAiB;QAEvB,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE;YACA;YACA;YACA,OAAO,KAAK,GAAG,CAAC,CAAC,OAAS,CAAC;oBACzB,MAAM,KAAK,IAAI;oBACf,UAAU,KAAK,QAAQ;gBACzB,CAAC;QACH,GACA;YAAE,QAAQ;QAAI;IAGlB,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyB,GAClC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}